{
  "name": "daily-skeleton",
  "version": 1,
  "vars": {
    "TMP": "/tmp/crayfish-daily"
  },
  "steps": [
    {
      "id": "mk_tmp",
      "kind": "exec",
      "run": {
        "kind": "cmd",
        "cmd": "bash",
        "args": [
          "-lc",
          "mkdir -p '{{vars.TMP}}'"
        ]
      }
    },
    {
      "id": "load_candidates",
      "kind": "exec",
      "run": {
        "kind": "cmd",
        "cmd": "bash",
        "args": [
          "-lc",
          "# TODO: load today's ledger/state and produce candidates list\necho '{\\\"items\\\":[]}' > '{{vars.TMP}}/candidates.json'\ncat '{{vars.TMP}}/candidates.json'"
        ]
      }
    },
    {
      "id": "select_and_verify",
      "kind": "agent",
      "assigneeAgentId": "primary",
      "session": {
        "mode": "sticky",
        "label": "wf:daily:primary"
      },
      "prompt": "Select Top5 for deep verify/analyze, items 6-10 for light labeling. For each Top5 item, perform deep verification. Output STRICT JSON only.",
      "input": {
        "candidatesPath": "{{vars.TMP}}/candidates.json"
      },
      "schema": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "top5",
          "rest"
        ],
        "properties": {
          "top5": {
            "type": "array",
            "maxItems": 5,
            "items": {
              "type": "object",
              "required": [
                "item",
                "verification"
              ],
              "properties": {
                "item": {},
                "verification": {
                  "type": "object"
                }
              }
            }
          },
          "rest": {
            "type": "array",
            "maxItems": 5,
            "items": {}
          }
        }
      },
      "retries": 3
    },
    {
      "id": "render_daily",
      "kind": "exec",
      "run": {
        "kind": "cmd",
        "cmd": "bash",
        "args": [
          "-lc",
          "# TODO: render final daily text\necho '{\\\"text\\\":\\\"\\\"}'"
        ]
      }
    }
  ]
}